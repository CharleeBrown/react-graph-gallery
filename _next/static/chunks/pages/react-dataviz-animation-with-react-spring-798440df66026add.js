(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{6390:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/react-dataviz-animation-with-react-spring",function(){return n(6024)}])},3485:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(5893),r=n(7294),a=function(e){var t=e.startOpen,n=e.title,a=e.children,s=(0,r.useState)(t),o=s[0],c=s[1],l=o?"max-h-full":"max-h-0",u=o?"overflow-visible":"overflow-hidden";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h2",{className:"cursor-pointer",onClick:function(){return c(!o)},children:[o?(0,i.jsx)("span",{className:"text-purple-700 w-4 mr-2 hover:text-purple-900 inline-block",children:"-"}):(0,i.jsx)("span",{className:"text-purple-700 w-4 mr-2 hover:text-purple-900 inline-block",children:"+"}),n]}),(0,i.jsx)("div",{className:"transition-max-height ease-in duration-300  "+l+" "+u,children:a})]})}},2729:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i=n(5893),r=function(e){var t=e.children,n=e.onClick,r=e.isFilled,a=e.size,s=void 0===a?"md":a,o="rounded m-1 cursor-pointer border-purple-700 border ";return"sm"===s&&(o+="text-sm py-1 px-2"),"md"===s&&(o+="text-md py-2 px-4"),o+=r?" bg-purple-500 hover:bg-purple-700 text-white":" bg-white hover:bg-purple-700 hover:text-white text-purple-700",(0,i.jsx)("button",{className:o,onClick:n,children:t})}},6158:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var i=n(5893),r=function(e){var t=e.children;return(0,i.jsx)("p",{className:"text-sm text-gray-500 max-w-xs italic text-center mt-4 font-light",children:t})}},33:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var i=n(5893),r=n(7294),a=n(217),s=n(2729),o=n(6158),c=n(7975),l=function(e){var t=e.VizComponent,n=e.vizName,l=e.height,u=void 0===l?400:l,d=e.maxWidth,f=void 0===d?800:d,h=e.caption,p=(0,r.useState)(!1),x=p[0],m=p[1],v=(0,r.useRef)(null),g=(0,a.B)(v);return(0,i.jsx)("div",{style:{marginLeft:"-50vw",left:"50%"},className:"my-4 py-4 w-screen relative",children:x?(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,i.jsx)("div",{style:{maxWidth:2e3},className:"w-full",children:(0,i.jsx)(c.X,{vizName:n})}),(0,i.jsx)("div",{className:"flex justify-center mt-2",children:(0,i.jsx)(s.z,{size:"sm",onClick:function(){return m(!x)},children:"Hide Sandbox"})})]}):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,i.jsx)("div",{className:"bg-gray-50 w-screen flex justify-center",children:(0,i.jsx)("div",{style:{height:u,width:"100%",maxWidth:f},ref:v,children:(0,i.jsx)(t,{height:u,width:g.width})})}),(0,i.jsx)(o.Y,{children:h}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(s.z,{size:"sm",onClick:function(){return m(!x)},children:"Show code"})})]})})}},7975:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});var i=n(5893),r=(n(7294),function(e){var t="https://codesandbox.io/embed/github/holtzy/react-graph-gallery/tree/main/viz/"+e.vizName+"?fontsize=14&hidenavigation=1&theme=dark&expanddevtools=0";return(0,i.jsx)("iframe",{src:t,style:{width:"100%",height:"500px",border:"solid",borderWidth:2,borderRadius:"4px",overflow:"hidden"},allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"})})},4974:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(5893),r=function(e){var t=e.children;return(0,i.jsx)("span",{className:"font-semibol bg-purple-100 p-1",children:t})}},217:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var i=n(7294),r=function(e){var t=function(){return{width:e.current?e.current.offsetWidth:0,height:e.current?e.current.offsetHeight:0}},n=(0,i.useState)(t),r=n[0],a=n[1],s=function(){a(t())};return(0,i.useEffect)((function(){return window.addEventListener("resize",s),function(){return window.removeEventListener("resize",s)}}),[]),(0,i.useLayoutEffect)((function(){s()}),[]),r}},8418:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.default=void 0;var r,a=(r=n(7294))&&r.__esModule?r:{default:r},s=n(6273),o=n(387),c=n(7190);var l={};function u(e,t,n,i){if(e&&s.isLocalURL(t)){e.prefetch(t,n,i).catch((function(e){0}));var r=i&&"undefined"!==typeof i.locale?i.locale:e&&e.locale;l[t+"%"+n+(r?"%"+r:"")]=!0}}var d=function(e){var t,n=!1!==e.prefetch,r=o.useRouter(),d=a.default.useMemo((function(){var t=i(s.resolveHref(r,e.href,!0),2),n=t[0],a=t[1];return{href:n,as:e.as?s.resolveHref(r,e.as):a||n}}),[r,e.href,e.as]),f=d.href,h=d.as,p=e.children,x=e.replace,m=e.shallow,v=e.scroll,g=e.locale;"string"===typeof p&&(p=a.default.createElement("a",null,p));var y=(t=a.default.Children.only(p))&&"object"===typeof t&&t.ref,j=i(c.useIntersection({rootMargin:"200px"}),2),w=j[0],b=j[1],k=a.default.useCallback((function(e){w(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,w]);a.default.useEffect((function(){var e=b&&n&&s.isLocalURL(f),t="undefined"!==typeof g?g:r&&r.locale,i=l[f+"%"+h+(t?"%"+t:"")];e&&!i&&u(r,f,h,{locale:t})}),[h,f,b,g,n,r]);var N={ref:k,onClick:function(e){t.props&&"function"===typeof t.props.onClick&&t.props.onClick(e),e.defaultPrevented||function(e,t,n,i,r,a,o,c){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&s.isLocalURL(n))&&(e.preventDefault(),null==o&&i.indexOf("#")>=0&&(o=!1),t[r?"replace":"push"](n,i,{shallow:a,locale:c,scroll:o}))}(e,r,f,h,x,m,v,g)},onMouseEnter:function(e){s.isLocalURL(f)&&(t.props&&"function"===typeof t.props.onMouseEnter&&t.props.onMouseEnter(e),u(r,f,h,{priority:!0}))}};if(e.passHref||"a"===t.type&&!("href"in t.props)){var z="undefined"!==typeof g?g:r&&r.locale,C=r&&r.isLocaleDomain&&s.getDomainLocale(h,z,r&&r.locales,r&&r.domainLocales);N.href=C||s.addBasePath(s.addLocale(h,z,r&&r.defaultLocale))}return a.default.cloneElement(t,N)};t.default=d},7190:function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(c){r=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=function(e){var t=e.rootMargin,n=e.disabled||!s,c=r.useRef(),l=i(r.useState(!1),2),u=l[0],d=l[1],f=r.useCallback((function(e){c.current&&(c.current(),c.current=void 0),n||u||e&&e.tagName&&(c.current=function(e,t,n){var i=function(e){var t=e.rootMargin||"",n=o.get(t);if(n)return n;var i=new Map,r=new IntersectionObserver((function(e){e.forEach((function(e){var t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)}))}),e);return o.set(t,n={id:t,observer:r,elements:i}),n}(n),r=i.id,a=i.observer,s=i.elements;return s.set(e,t),a.observe(e),function(){s.delete(e),a.unobserve(e),0===s.size&&(a.disconnect(),o.delete(r))}}(e,(function(e){return e&&d(e)}),{rootMargin:t}))}),[n,t,u]);return r.useEffect((function(){if(!s&&!u){var e=a.requestIdleCallback((function(){return d(!0)}));return function(){return a.cancelIdleCallback(e)}}}),[u]),[f,u]};var r=n(7294),a=n(9311),s="undefined"!==typeof IntersectionObserver;var o=new Map},6024:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n(5893),r=n(7294),a=n(6184),s=n(6193),o=n(6978),c=n(33),l=n(7197),u=n(3485),d=n(217),f=n(4974),h=n(441),p=n(3728),x=function(e){var t=e.position,n=e.width,r=e.height,a=e.fill,s=(0,h.q_)({to:{position:t,fill:a},config:h.vc.molasses});return(0,i.jsx)("svg",{width:n,height:r,children:(0,i.jsx)(p.q.circle,{stroke:s.fill,fill:s.fill,strokeWidth:2,fillOpacity:.4,r:38,cx:s.position,cy:50})})},m={border:"1px solid #9a6fb0",borderRadius:"3px",padding:"4px 8px",margin:"10px 2px",fontSize:14,color:"#9a6fb0",opacity:.7},v=function(e){var t=e.width,n=e.height,a=(0,r.useState)(40),s=a[0],o=a[1];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{style:m,onClick:function(){return o(40)},children:"Left"}),(0,i.jsx)("button",{style:m,onClick:function(){return o(t-40)},children:"Right"})]}),(0,i.jsx)("div",{style:{width:t,height:n},children:(0,i.jsx)(x,{position:s,width:t,height:n,fill:40===s?"#9a6fb0":"#69b3a2"})})]})},g=function(e){var t=e.width,n=void 0===t?700:t,r=e.height,a=void 0===r?400:r;return(0,i.jsx)(v,{width:n,height:a})},y=function(e){var t=e.xOffset,n=e.value;(0,h.q_)({to:{xOffset:t},config:h.vc.molasses});return(0,i.jsxs)(p.q.g,{transform:"translate(".concat(t,", 0)"),children:[(0,i.jsx)("line",{y2:6,stroke:"currentColor"}),(0,i.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:n})]})},j=function(e){var t=e.xScale,n=e.pixelsPerTick,a=t.range(),s=(0,r.useMemo)((function(){var e=a[1]-a[0],i=Math.floor(e/n);return t.ticks(i).map((function(e){return{value:e,xOffset:t(e)}}))}),[t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:["M",a[0],0,"L",a[1],0].join(" "),fill:"none",stroke:"currentColor"}),s.map((function(e,t){var n=e.value,r=e.xOffset;return(0,i.jsx)(y,{value:n,xOffset:r},t)}))]})},w=n(2206),b={border:"1px solid #9a6fb0",borderRadius:"3px",padding:"4px 8px",margin:"10px 2px",fontSize:14,color:"#9a6fb0",opacity:.7},k=function(e){var t=e.width,n=e.height,a=(0,r.useState)(40),s=a[0],o=a[1],c=w.BYU().domain([0,s]).range([0,t]);return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{style:b,onClick:function(){return o(40)},children:"40"}),(0,i.jsx)("button",{style:b,onClick:function(){return o(400)},children:"400"})]}),(0,i.jsx)("div",{style:{width:t,height:n},children:(0,i.jsx)("svg",{width:t-50,height:n,children:(0,i.jsx)(j,{xScale:c,pixelsPerTick:60})})})]})},N=function(e){var t=e.width,n=void 0===t?700:t,r=e.height,a=void 0===r?400:r;return(0,i.jsx)(k,{width:n,height:a})},z=(0,i.jsxs)("p",{children:["This post is dedicated to ",(0,i.jsx)("code",{children:"react-spring"}),", a javascript library for spring animations. It quickly explains what it is and how it works, and then explains how it can be used in the field of data visualization."]});"\nconst TICK_LENGTH = 6;\n\nexport const AxisBottom = ({ xScale, pixelsPerTick }) => {\n\n".trim();function C(){var e=(0,r.useRef)(null),t=(0,d.B)(e);return(0,i.jsxs)(a.A,{title:"React-spring for data visualization",seoDescription:"This blogpost explains how to use react-spring to smoothly animate transitions on your charts made with react and d3.js.",children:[(0,i.jsx)(s.Z,{title:"React-spring for data visualization",description:z}),(0,i.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,i.jsx)("div",{style:{height:150,width:"100%",maxWidth:500},ref:e,children:(0,i.jsx)(v,{width:t.width,height:t.height})}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 max-w-md italic text-center mt-4 font-light",children:["A minimal react-spring dataviz example. A viz component expect a"," ",(0,i.jsx)("code",{children:"position"})," and a ",(0,i.jsx)("code",{children:"color"})," prop. But it smoothly animates the transition."]})]}),(0,i.jsxs)(u.U,{title:"What is a spring animation?",startOpen:!0,children:[(0,i.jsxs)("p",{children:["Spring animations are different than typical CSS easing animation. They're built on spring physics, which gives a more fluid and organic feel. The best way to be introduced to this concept is to read Josh Comeau's"," ",(0,i.jsx)("a",{href:"https://www.joshwcomeau.com/animation/a-friendly-introduction-to-spring-physics/",children:"friendly Introduction to Spring Physics"})]}),(0,i.jsx)("p",{children:"To quote him directly:"}),(0,i.jsx)(f.b,{children:"Spring physics are like a secret ingredient; they make all animations taste better"})]}),(0,i.jsxs)(u.U,{title:"Most basic react spring example",startOpen:!0,children:[(0,i.jsxs)("p",{children:["The best tool to build a spring animation in the react world is"," ",(0,i.jsx)("a",{href:"https://react-spring.io/",children:"react-spring"}),", a library dedicated to it. If you're not familiar with it already you probably want to take a look at their"," ",(0,i.jsx)("a",{href:"https://react-spring.io/",children:"home page"}),"."]}),(0,i.jsx)("p",{children:"Let's start with a basic example showing how to animate a very basic viz component that just renders a circle."}),(0,i.jsx)(c.$,{vizName:"ReactSpringMostBasic",VizComponent:g,maxWidth:800,height:200,caption:"A very basic animation using react and react-spring."})]}),(0,i.jsxs)(u.U,{title:"Animating axes",startOpen:!0,children:[(0,i.jsx)("p",{children:"A common hassle is to animate axes, since it's a lot of svg elements."}),(0,i.jsx)(c.$,{vizName:"ReactSpringAxis",VizComponent:N,maxWidth:800,height:200,caption:"A very basic animation using react and react-spring."})]}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("hr",{className:"full-bleed bord er bg-gray-200 mb-3 mt-10"}),(0,i.jsx)(l.Z,{chartFamily:"general"}),(0,i.jsx)("div",{className:"mt-20"}),(0,i.jsx)(o.Z,{})]})}},9008:function(e,t,n){e.exports=n(5443)},1664:function(e,t,n){e.exports=n(8418)}},function(e){e.O(0,[206,524,702,774,888,179],(function(){return t=6390,e(e.s=t);var t}));var t=e.O();_N_E=t}]);