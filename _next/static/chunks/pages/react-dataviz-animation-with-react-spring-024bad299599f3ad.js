(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6818],{407:function(t,i,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/react-dataviz-animation-with-react-spring",function(){return e(6308)}])},6308:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return z}});var n=e(5893),s=e(7294),a=e(153),r=e(9965),o=e(2594),l=e(1122),c=e(7262),h=e(6260),d=e(9973),p=e(2182),x=e(9920);let u=t=>{let{position:i,width:e,height:s,fill:a}=t,r=(0,x.useSpring)({to:{position:i,fill:a},config:x.config.molasses});return(0,n.jsx)("svg",{width:e,height:s,children:(0,n.jsx)(x.animated.circle,{stroke:r.fill,fill:r.fill,strokeWidth:2,fillOpacity:.4,r:38,cx:r.position,cy:50})})},m={border:"1px solid #9a6fb0",borderRadius:"3px",padding:"4px 8px",margin:"10px 2px",fontSize:14,color:"#9a6fb0",opacity:.7},f=t=>{let{width:i,height:e}=t,[a,r]=(0,s.useState)(40);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{style:m,onClick:()=>r(40),children:"Left"}),(0,n.jsx)("button",{style:m,onClick:()=>r(i-40),children:"Right"})]}),(0,n.jsx)("div",{style:{width:i,height:e},children:(0,n.jsx)(u,{position:a,width:i,height:e,fill:40===a?"#9a6fb0":"#69b3a2"})})]})},g=t=>{let{width:i=700,height:e=400}=t;return(0,n.jsx)(f,{width:i,height:e})},j=t=>{let{xOffset:i,value:e}=t;return(0,x.useSpring)({to:{xOffset:i},config:x.config.molasses}),(0,n.jsxs)(x.animated.g,{transform:"translate(".concat(i,", 0)"),children:[(0,n.jsx)("line",{y2:6,stroke:"currentColor"}),(0,n.jsx)("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:e})]})},b=t=>{let{xScale:i,pixelsPerTick:e}=t,a=i.range(),r=(0,s.useMemo)(()=>{let t=a[1]-a[0];return i.ticks(Math.floor(t/e)).map(t=>({value:t,xOffset:i(t)}))},[i]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:["M",a[0],0,"L",a[1],0].join(" "),fill:"none",stroke:"currentColor"}),r.map((t,i)=>{let{value:e,xOffset:s}=t;return(0,n.jsx)(j,{value:e,xOffset:s},i)})]})};var y=e(1508);let w={border:"1px solid #9a6fb0",borderRadius:"3px",padding:"4px 8px",margin:"10px 2px",fontSize:14,color:"#9a6fb0",opacity:.7},v=t=>{let{width:i,height:e}=t,[a,r]=(0,s.useState)(40),o=y.BYU().domain([0,a]).range([0,i]);return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{style:w,onClick:()=>r(40),children:"40"}),(0,n.jsx)("button",{style:w,onClick:()=>r(400),children:"400"})]}),(0,n.jsx)("div",{style:{width:i,height:e},children:(0,n.jsx)("svg",{width:i-50,height:e,children:(0,n.jsx)(b,{xScale:o,pixelsPerTick:60})})})]})},k=t=>{let{width:i=700,height:e=400}=t;return(0,n.jsx)(v,{width:i,height:e})},S=(0,n.jsxs)("p",{children:["This post is dedicated to ",(0,n.jsx)("code",{children:"react-spring"}),", a javascript library for spring animations. It quickly explains what it is and how it works, and then explains how it can be used in the field of data visualization."]});function z(){let t=(0,s.useRef)(null),i=(0,d.B)(t);return(0,n.jsxs)(a.A,{title:"React-spring for data visualization",seoDescription:"This blogpost explains how to use react-spring to smoothly animate transitions on your charts made with react and d3.js.",children:[(0,n.jsx)(r.Z,{title:"React-spring for data visualization",description:S}),(0,n.jsxs)("div",{className:"w-full flex flex-col justify-center items-center",children:[(0,n.jsx)("div",{style:{height:150,width:"100%",maxWidth:500},ref:t,children:(0,n.jsx)(f,{width:i.width,height:i.height})}),(0,n.jsxs)("p",{className:"text-sm text-gray-500 max-w-md italic text-center mt-4 font-light",children:["A minimal react-spring dataviz example. A viz component expect a"," ",(0,n.jsx)("code",{children:"position"})," and a ",(0,n.jsx)("code",{children:"color"})," prop. But it smoothly animates the transition."]})]}),(0,n.jsxs)(h.U,{title:"What is a spring animation?",startOpen:!0,children:[(0,n.jsxs)("p",{children:["Spring animations are different than typical CSS easing animation. They're built on spring physics, which gives a more fluid and organic feel. The best way to be introduced to this concept is to read Josh Comeau's"," ",(0,n.jsx)("a",{href:"https://www.joshwcomeau.com/animation/a-friendly-introduction-to-spring-physics/",children:"friendly Introduction to Spring Physics"})]}),(0,n.jsx)("p",{children:"To quote him directly:"}),(0,n.jsx)(p.b,{children:"Spring physics are like a secret ingredient; they make all animations taste better"})]}),(0,n.jsxs)(h.U,{title:"Most basic react spring example",startOpen:!0,children:[(0,n.jsxs)("p",{children:["The best tool to build a spring animation in the react world is"," ",(0,n.jsx)("a",{href:"https://react-spring.io/",children:"react-spring"}),", a library dedicated to it. If you're not familiar with it already you probably want to take a look at their"," ",(0,n.jsx)("a",{href:"https://react-spring.io/",children:"home page"}),"."]}),(0,n.jsx)("p",{children:"Let's start with a basic example showing how to animate a very basic viz component that just renders a circle."}),(0,n.jsx)(l.$,{vizName:"ReactSpringMostBasic",VizComponent:g,maxWidth:800,height:200,caption:"A very basic animation using react and react-spring."}),(0,n.jsx)("p",{children:"The useSpring funtion can take 2 types of input: an object or a function"}),(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"if object, it returns an object that has the values of our animation"}),(0,n.jsx)("li",{children:"if function, it returns an array of length 2. First item is the object mentionned above. item 2 is the api that controls the spring. api is used for imperative style"})]})]}),(0,n.jsxs)(h.U,{title:"Animating axes",startOpen:!0,children:[(0,n.jsx)("p",{children:"A common hassle is to animate axes, since it's a lot of svg elements."}),(0,n.jsx)(l.$,{vizName:"ReactSpringAxis",VizComponent:k,maxWidth:800,height:200,caption:"A very basic animation using react and react-spring."})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("hr",{className:"full-bleed  bord er bg-gray-200 mb-3 mt-10"}),(0,n.jsx)(c.Z,{chartFamily:"general"}),(0,n.jsx)("div",{className:"mt-20"}),(0,n.jsx)(o.Z,{})]})}}},function(t){t.O(0,[3996,1508,9920,645,3499,9774,2888,179],function(){return t(t.s=407)}),_N_E=t.O()}]);